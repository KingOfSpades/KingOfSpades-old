<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="day-prompt" content="days ago"><meta name="hour-prompt" content="hours ago"><meta name="minute-prompt" content="minutes ago"><meta name="justnow-prompt" content="just now"><meta name="generator" content="Jekyll v4.3.1" /><meta property="og:title" content="hey for load testing http applications" /><meta property="og:locale" content="en" /><meta name="description" content="short" /><meta property="og:description" content="short" /><link rel="canonical" href="https://kingofspades.github.io/posts/hey-for-loadtesting-http/" /><meta property="og:url" content="https://kingofspades.github.io/posts/hey-for-loadtesting-http/" /><meta property="og:site_name" content="Christian’s Blog" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-10-25T00:00:00+02:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="hey for load testing http applications" /><meta name="twitter:site" content="@CABenstein" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2022-11-27T17:38:52+01:00","datePublished":"2022-10-25T00:00:00+02:00","description":"short","headline":"hey for load testing http applications","mainEntityOfPage":{"@type":"WebPage","@id":"https://kingofspades.github.io/posts/hey-for-loadtesting-http/"},"url":"https://kingofspades.github.io/posts/hey-for-loadtesting-http/"}</script><title>hey for load testing http applications | Christian's Blog</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Christian's Blog"><meta name="application-name" content="Christian's Blog"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.updateMermaid(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_KEY); sessionStorage.removeItem(ModeToggle.MODE_KEY); } updateMermaid() { if (typeof mermaid !== "undefined") { let expectedTheme = (this.modeStatus === ModeToggle.DARK_MODE? "dark" : "default"); let config = { theme: expectedTheme }; /* re-render the SVG › <https://github.com/mermaid-js/mermaid/issues/311#issuecomment-332557344> */ $(".mermaid").each(function() { let svgCode = $(this).prev().children().html(); $(this).removeAttr("data-processed"); $(this).html(svgCode); }); mermaid.initialize(config); mermaid.init(undefined, ".mermaid"); } } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.updateMermaid(); } /* flipMode() */ </script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end" lang="en"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="/assets/images/bio-photo.png" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Christian's Blog</a></div><div class="site-subtitle">Stories of /dev/null</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/ex280/" class="nav-link"> <i class="fa-fw fas fa-graduation-cap ml-xl-3 mr-xl-3 unloaded"></i> <span>EX280</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/KingOfSpades" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>hey for load testing http applications</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>hey for load testing http applications</h1><div class="post-meta text-muted"><div> By <em> <a href="https://github.com/KingOfSpades">Christian A. Benstein</a> </em></div><div class="d-flex"><div> <span> Posted <em class="timeago" date="2022-10-25 00:00:00 +0200" data-toggle="tooltip" data-placement="bottom" title="Tue, Oct 25, 2022, 12:00 AM +0200" >Oct 25</em> </span> <span> Updated <em class="timeago" date="2022-11-27 17:38:52 +0100 " data-toggle="tooltip" data-placement="bottom" title="Sun, Nov 27, 2022, 5:38 PM +0100" >Nov 27</em> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="893 words"> <em>4 min</em> read</span></div></div></div><div class="post-content"><p><strong>short</strong></p><p><code class="language-plaintext highlighter-rouge">hey</code> is a HTTP load tester CLI tool to benchmark HTTP requests to a HTTP end-point. Get it at <a href="https://github.com/rakyll/hey">GitHub</a></p><hr /><p>Today we will be taking a look at a small utility called <code class="language-plaintext highlighter-rouge">hey</code>. You can use <code class="language-plaintext highlighter-rouge">hey</code> to load test HTTP applications or generate load for a web application. This comes in handy when you want to simulate use or check what your app does when it receives 1000s of requests.</p><div class="alert alert-danger" role="alert"><i class="fa fa-exclamation-circle"></i> <b>Warning: </b>Using a load test on website that you do not own or have permission to test can result in you being banned or blocked</div><h1 id="installation">Installation</h1><p>Installation on macOS with <code class="language-plaintext highlighter-rouge">brew</code> is really easy, just run:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>brew <span class="nb">install </span>hey
</pre></table></code></div></div><p>For other installation options, check out: <a href="https://github.com/rakyll/hey#installation">Hey Installation</a></p><h1 id="usage">Usage</h1><p>So, we are going to run this against a local docker container, just to be sure that we don’t mess with anyone’s website.</p><h2 id="setting-up-a-container">Setting up a container<a href="#setting-up-a-container"><i class="fas fa-hashtag"></i></a></h2></h2><p>This is pretty straight forward. Start Docker and run the following command to start it in the background:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nv">$ </span>docker run <span class="nt">--name</span> webserver <span class="nt">-p</span> 8080:80 <span class="nt">-d</span> nginx
</pre></table></code></div></div><p>To make sure it’s running we can check using the <code class="language-plaintext highlighter-rouge">docker ps</code> command:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="nv">$ </span>docker ps
CONTAINER ID   IMAGE     COMMAND                  CREATED         STATUS         PORTS                                   NAMES
c2c829348c89   nginx     <span class="s2">"/docker-entrypoint.…"</span>   3 seconds ago   Up 3 seconds   0.0.0.0:8080-&gt;80/tcp, :::8080-&gt;80/tcp   webserver
</pre></table></code></div></div><p>Now you can also start a <code class="language-plaintext highlighter-rouge">tail</code> on the container to see your load test in action:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>docker logs <span class="nt">-f</span> webserver
</pre></table></code></div></div><p>Example output:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre>172.17.0.1 - - <span class="o">[</span>25/Oct/2022:15:12:18 +0000] <span class="s2">"GET / HTTP/1.1"</span> 200 615 <span class="s2">"-"</span> <span class="s2">"hey/0.0.1"</span> <span class="s2">"-"</span>
172.17.0.1 - - <span class="o">[</span>25/Oct/2022:15:12:18 +0000] <span class="s2">"GET / HTTP/1.1"</span> 200 615 <span class="s2">"-"</span> <span class="s2">"hey/0.0.1"</span> <span class="s2">"-"</span>
172.17.0.1 - - <span class="o">[</span>25/Oct/2022:15:12:18 +0000] <span class="s2">"GET / HTTP/1.1"</span> 200 615 <span class="s2">"-"</span> <span class="s2">"hey/0.0.1"</span> <span class="s2">"-"</span>
</pre></table></code></div></div><h2 id="using-hey">Using hey<a href="#using-hey"><i class="fas fa-hashtag"></i></a></h2></h2><p>So let’s get testing. <code class="language-plaintext highlighter-rouge">hey</code> supports some great arguments like <code class="language-plaintext highlighter-rouge">-n</code> (number) the amount of requests to send, <code class="language-plaintext highlighter-rouge">-c</code> (concurrently) for the number of workers to run concurrently and <code class="language-plaintext highlighter-rouge">-z</code> (Duration) to perform a test over <em>x</em> time. All options can be found on <a href="https://github.com/rakyll/hey#usage">Hey Usage</a></p><h2 id="examples">Examples<a href="#examples"><i class="fas fa-hashtag"></i></a></h2></h2><p>I’ll be showing some common usages</p><h3 id="example-1-100-requests">Example 1: 100 requests<a href="#example-1-100-requests"><i class="fas fa-hashtag"></i></a></h3></h3><p>Let’s fire up some requests. First up, 100 request using 5 concurrent workers:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nv">$ </span>hey <span class="nt">-n</span> 100 <span class="nt">-c</span> 5 http://localhost:8080
</pre></table></code></div></div><p>Results:</p><div class="language-yaml highlighter-rouge"><div class="code-header"> <span label-text="YAML"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
</pre><td class="rouge-code"><pre><span class="na">Summary</span><span class="pi">:</span>
  <span class="na">Total</span><span class="pi">:</span><span class="err">	</span><span class="s">0.0448 secs</span>
  <span class="na">Slowest</span><span class="pi">:</span><span class="err">	</span><span class="s">0.0089 secs</span>
  <span class="na">Fastest</span><span class="pi">:</span><span class="err">	</span><span class="s">0.0010 secs</span>
  <span class="na">Average</span><span class="pi">:</span><span class="err">	</span><span class="s">0.0022 secs</span>
  <span class="na">Requests/sec</span><span class="pi">:</span><span class="err">	</span><span class="m">2231.3041</span>

  <span class="na">Total data</span><span class="pi">:</span><span class="err">	</span><span class="s">61500 bytes</span>
  <span class="na">Size/request</span><span class="pi">:</span><span class="err">	</span><span class="s">615 bytes</span>

<span class="na">Response time histogram</span><span class="pi">:</span>
  <span class="s">0.001 [1]</span><span class="err">	</span><span class="s">|■</span>
  <span class="s">0.002 [34]</span><span class="err">	</span><span class="s">|■■■■■■■■■■■■■■■■■■■■■■■</span>
  <span class="s">0.003 [60]</span><span class="err">	</span><span class="s">|■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■</span>
  <span class="s">0.003 [0]</span><span class="err">	</span><span class="s">|</span>
  <span class="s">0.004 [0]</span><span class="err">	</span><span class="s">|</span>
  <span class="s">0.005 [0]</span><span class="err">	</span><span class="s">|</span>
  <span class="s">0.006 [0]</span><span class="err">	</span><span class="s">|</span>
  <span class="s">0.007 [0]</span><span class="err">	</span><span class="s">|</span>
  <span class="s">0.007 [0]</span><span class="err">	</span><span class="s">|</span>
  <span class="s">0.008 [0]</span><span class="err">	</span><span class="s">|</span>
  <span class="s">0.009 [5]</span><span class="err">	</span><span class="s">|■■■</span>


<span class="na">Latency distribution</span><span class="pi">:</span>
  <span class="s">10% in 0.0016 secs</span>
  <span class="s">25% in 0.0017 secs</span>
  <span class="s">50% in 0.0019 secs</span>
  <span class="s">75% in 0.0021 secs</span>
  <span class="s">90% in 0.0022 secs</span>
  <span class="s">95% in 0.0087 secs</span>
  <span class="s">99% in 0.0089 secs</span>

<span class="s">Details (average, fastest, slowest)</span><span class="err">:</span>
  <span class="na">DNS+dialup</span><span class="pi">:</span><span class="err">	</span><span class="s">0.0002 secs, 0.0010 secs, 0.0089 secs</span>
  <span class="na">DNS-lookup</span><span class="pi">:</span><span class="err">	</span><span class="s">0.0002 secs, 0.0000 secs, 0.0041 secs</span>
  <span class="na">req write</span><span class="pi">:</span><span class="err">	</span><span class="s">0.0000 secs, 0.0000 secs, 0.0002 secs</span>
  <span class="na">resp wait</span><span class="pi">:</span><span class="err">	</span><span class="s">0.0019 secs, 0.0009 secs, 0.0038 secs</span>
  <span class="na">resp read</span><span class="pi">:</span><span class="err">	</span><span class="s">0.0000 secs, 0.0000 secs, 0.0002 secs</span>

<span class="na">Status code distribution</span><span class="pi">:</span>
  <span class="pi">[</span><span class="nv">200</span><span class="pi">]</span><span class="err">	</span><span class="s">100 responses</span>
</pre></table></code></div></div><h3 id="example-2-5-requests-with-csv-output">Example 2: 5 requests with csv output<a href="#example-2-5-requests-with-csv-output"><i class="fas fa-hashtag"></i></a></h3></h3><p>Dump the results to <code class="language-plaintext highlighter-rouge">csv</code> output:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nv">$ </span>hey <span class="nt">-n</span> 1 <span class="nt">-c</span> 1 <span class="nt">-o</span> csv http://localhost:8080
</pre></table></code></div></div><p>Result:</p><pre><code class="language-csv">response-time,DNS+dialup,DNS,Request-write,Response-delay,Response-read,status-code,offset
0.0087,0.0047,0.0042,0.0001,0.0019,0.0001,200,0.0016
</code></pre><h3 id="example-3--30-seconds-of-requests">Example 3: 30 seconds of requests<a href="#example-3--30-seconds-of-requests"><i class="fas fa-hashtag"></i></a></h3></h3><p>Now we are going to use the duration (<code class="language-plaintext highlighter-rouge">-z</code>) option:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nv">$ </span>hey <span class="nt">-z</span> 30s http://localhost:8080
</pre></table></code></div></div><p>Results:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
</pre><td class="rouge-code"><pre>Summary:
  Total:	30.0082 secs
  Slowest:	0.1231 secs
  Fastest:	0.0010 secs
  Average:	0.0070 secs
  Requests/sec:	7096.5514

  Total data:	130967325 bytes
  Size/request:	615 bytes

Response <span class="nb">time </span>histogram:
  0.001 <span class="o">[</span>1]	|
  0.013 <span class="o">[</span>199692]	|■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■
  0.025 <span class="o">[</span>12165]	|■■
  0.038 <span class="o">[</span>868]	|
  0.050 <span class="o">[</span>159]	|
  0.062 <span class="o">[</span>47]	|
  0.074 <span class="o">[</span>11]	|
  0.086 <span class="o">[</span>9]	|
  0.099 <span class="o">[</span>1]	|
  0.111 <span class="o">[</span>1]	|
  0.123 <span class="o">[</span>1]	|


Latency distribution:
  10% <span class="k">in </span>0.0035 secs
  25% <span class="k">in </span>0.0045 secs
  50% <span class="k">in </span>0.0061 secs
  75% <span class="k">in </span>0.0085 secs
  90% <span class="k">in </span>0.0115 secs
  95% <span class="k">in </span>0.0140 secs
  99% <span class="k">in </span>0.0212 secs

Details <span class="o">(</span>average, fastest, slowest<span class="o">)</span>:
  DNS+dialup:	0.0000 secs, 0.0010 secs, 0.1231 secs
  DNS-lookup:	0.0000 secs, 0.0000 secs, 0.0069 secs
  req write:	0.0000 secs, 0.0000 secs, 0.0025 secs
  resp <span class="nb">wait</span>:	0.0069 secs, 0.0009 secs, 0.1230 secs
  resp <span class="nb">read</span>:	0.0001 secs, 0.0000 secs, 0.0431 secs

Status code distribution:
  <span class="o">[</span>200]	212955 responses
</pre></table></code></div></div><h3 id="limiting-requests">Limiting requests<a href="#limiting-requests"><i class="fas fa-hashtag"></i></a></h3></h3><p>Now, as you can see, we just fired off 212955 requests. That might be a bit of overkill. To prevent this, we can use the <code class="language-plaintext highlighter-rouge">-q</code> (Rate limit) and <code class="language-plaintext highlighter-rouge">-c</code> option. We will perform a load test of 5 seconds and use <code class="language-plaintext highlighter-rouge">-c</code> to limit ourselves to 2 workers, and we will set a limit of 5 request per second per worker:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nv">$ </span>hey <span class="nt">-z</span> 5s <span class="nt">-c</span> 2 <span class="nt">-q</span> 5 http://localhost:8080
</pre></table></code></div></div><p>This results in 50 requests being made:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre>...

Status code distribution:
  <span class="o">[</span>200]	50 responses
</pre></table></code></div></div><h1 id="wrapping-up">Wrapping up</h1><p>So that’s <code class="language-plaintext highlighter-rouge">hey</code>. A super simple HTTP load tester. You can use <code class="language-plaintext highlighter-rouge">hey</code> to do some advanced things like posting code, testing authentication and other things. Take a look at the <a href="https://github.com/rakyll/hey">readme</a></p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/commandline/'>Commandline</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/cli/" class="post-tag no-text-decoration" >cli</a> <a href="/tags/macos/" class="post-tag no-text-decoration" >macos</a> <a href="/tags/devops/" class="post-tag no-text-decoration" >devops</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=hey for load testing http applications - Christian's Blog&url=https://kingofspades.github.io/posts/hey-for-loadtesting-http/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=hey for load testing http applications - Christian's Blog&u=https://kingofspades.github.io/posts/hey-for-loadtesting-http/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=hey for load testing http applications - Christian's Blog&url=https://kingofspades.github.io/posts/hey-for-loadtesting-http/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https://kingofspades.github.io/posts/hey-for-loadtesting-http/" data-toggle="tooltip" data-placement="top" title="Linkedin" target="_blank" rel="noopener" aria-label="Linkedin"> <i class="fa-fw fab fa-linkedin"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recent Update</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/hey-for-loadtesting-http/">hey for load testing http applications</a><li><a href="/posts/building-the-montsinger-rebound-s/">Build-log: Montsinger Rebound-S</a><li><a href="/posts/lets-get-fuzzy/">Let's get fuzzys</a><li><a href="/posts/creating-a-ex280-page/">Creating my EX280 page on Jekyll</a><li><a href="/posts/troubelshooting-permissions-on-pods/">ServiceAccounts and SCCs - Running pods with more permission's</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/ex280/">ex280</a> <a class="post-tag" href="/tags/kubernetes/">kubernetes</a> <a class="post-tag" href="/tags/openshift/">openshift</a> <a class="post-tag" href="/tags/macos/">macos</a> <a class="post-tag" href="/tags/cli/">cli</a> <a class="post-tag" href="/tags/customization/">customization</a> <a class="post-tag" href="/tags/alfred/">alfred</a> <a class="post-tag" href="/tags/linux/">linux</a> <a class="post-tag" href="/tags/azure/">azure</a> <a class="post-tag" href="/tags/devops/">devops</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="tail-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/SSH-Keys-and-Auth-Part-1/"><div class="card-body"> <em class="timeago small" date="2020-02-07 00:00:00 +0100" >Feb 7, 2020</em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>SSH Keys and Auth - Part 1 of 3</h3><div class="text-muted small"><p> In this ‘back to basics’ blog entry we’re going to talk about setting up SSH keys. SSH keys are used for logging in to stuff and authorizing to other stuff (like GiT). You can create a PRIVATE PULB...</p></div></div></a></div><div class="card"> <a href="/posts/restoring-yum-repos-centos/"><div class="card-body"> <em class="timeago small" date="2019-07-02 00:00:00 +0200" >Jul 2, 2019</em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Fixing broken YUM REPO's on CentOS</h3><div class="text-muted small"><p> Imagine this # yum update https://mirrors.lug.mtu.edu/epel/7/x86_64/repodata/13b91b1efe2a1db71aa132d76383fdb5311887958a910548546d58a5856e2c5d-primary.sqlite.xz: [Errno 14] HTTPS Error 404 - Not Fo...</p></div></div></a></div><div class="card"> <a href="/posts/DIY-Personal-CICD-Pipline/"><div class="card-body"> <em class="timeago small" date="2019-10-16 00:00:00 +0200" >Oct 16, 2019</em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>DIY Personal CI/CD Pipline</h3><div class="text-muted small"><p> Using Docker, Azure DevOps and Azure Container Instances we are going to setup a simple pipe-line that will build our image from code to Docker image, tag and push that image to a private Azure Con...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/building-the-montsinger-rebound-s/" class="btn btn-outline-primary" prompt="Older"><p>Build-log: Montsinger Rebound-S</p></a> <span class="btn btn-outline-primary disabled" prompt="Newer"><p>-</p></span></div><div id="disqus_thread" class="pt-2 pb-2"><p class="text-center text-muted small"> Comments powered by <a href="https://disqus.com/">Disqus</a>.</p></div><script type="text/javascript"> var disqus_config = function () { this.page.url = 'https://kingofspades.github.io/posts/hey-for-loadtesting-http/'; this.page.identifier = '/posts/hey-for-loadtesting-http/'; }; /* Lazy loading */ var disqus_observer = new IntersectionObserver(function (entries) { if(entries[0].isIntersecting) { (function () { var d = document, s = d.createElement('script'); s.src = 'https://https-blog-benstein-nl.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })(); disqus_observer.disconnect(); } }, { threshold: [0] }); disqus_observer.observe(document.querySelector('#disqus_thread')); /* Auto switch theme */ function reloadDisqus() { /* Disqus hasn't been loaded */ if (typeof DISQUS === "undefined") { return; } if (document.readyState == 'complete') { DISQUS.reset({ reload: true, config: disqus_config }); } } const modeToggle = document.querySelector(".mode-toggle"); if (typeof modeToggle !== "undefined") { /* modeToggle.addEventListener('click', reloadDisqus); // not pretty for 'color-scheme' */ window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', reloadDisqus); } </script></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center text-muted"><div class="footer-left"><p class="mb-0"> © 2022 <a href="https://github.com/KingOfSpades">Christian A. Benstein</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/ex280/">ex280</a> <a class="post-tag" href="/tags/kubernetes/">kubernetes</a> <a class="post-tag" href="/tags/openshift/">openshift</a> <a class="post-tag" href="/tags/macos/">macos</a> <a class="post-tag" href="/tags/cli/">cli</a> <a class="post-tag" href="/tags/customization/">customization</a> <a class="post-tag" href="/tags/alfred/">alfred</a> <a class="post-tag" href="/tags/linux/">linux</a> <a class="post-tag" href="/tags/azure/">azure</a> <a class="post-tag" href="/tags/devops/">devops</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><script src="https://cdn.jsdelivr.net/npm/mermaid@8/dist/mermaid.min.js"></script> <script> $(function() { let initTheme = "default"; if ($("html[mode=dark]").length > 0 || ($("html[mode]").length == 0 && window.matchMedia("(prefers-color-scheme: dark)").matches ) ) { initTheme = "dark"; } let mermaidConf = { theme: initTheme /* <default|dark|forest|neutral> */ }; /* Markdown converts to HTML */ $("pre").has("code.language-mermaid").each(function() { let svgCode = $(this).children().html(); $(this).addClass("unloaded"); $(this).after(`<div class=\"mermaid\">${svgCode}</div>`); }); mermaid.initialize(mermaidConf); }); </script><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.16.1,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-9VZBEPDENQ"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-9VZBEPDENQ'); }); </script>
